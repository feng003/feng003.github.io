<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">
        <title>docker(3): Dockderfile 语法详细介绍 - wiki</title>
        <meta name="keywords" content="个人wiki"/>
        <meta name="description" content="个人wiki"/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="container">
            
<div id="header">
  <div id="post-nav"><a href="/">Home</a>&nbsp;»&nbsp;<a href="/#linux">linux</a>&nbsp;»&nbsp;docker(3): Dockderfile 语法详细介绍</div>
</div>
<div class="clearfix"></div>
<div id="title">docker(3): Dockderfile 语法详细介绍</div>
  <div id="content">
  <blockquote>
<p>Dockerfile 语法示例</p>
</blockquote>
<h6 id="_1">注释 和 命令+参数</h6>
<div class="hlcode"><pre><span class="cp"># Line blocks used for commenting</span>
<span class="n">command</span> <span class="n">argument</span> <span class="n">argument</span> <span class="p">..</span>
</pre></div>


<blockquote>
<p>命令</p>
</blockquote>
<h6 id="from-fromdockerfile">FROM 定义了使用哪个基础镜像启动构建流程，FROM命令必须是Dockerfile的首个命令。</h6>
<div class="hlcode"><pre><span class="err">#</span> <span class="nb">Usage</span><span class="p">:</span> <span class="nb">FROM</span>  <span class="o">&lt;</span><span class="nb">image</span><span class="o">&gt;</span>   <span class="ow">or</span>   <span class="nb">FROM</span> <span class="o">&lt;</span><span class="nb">image</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="kt">tag</span><span class="o">&gt;</span>
<span class="nb">FROM</span>  <span class="nx">ubuntu</span>
</pre></div>


<h6 id="maintainer-from">MAINTAINER 声明作者，并应该放在FROM的后面</h6>
<div class="hlcode"><pre><span class="cp"># Usage: MAINTAINER [name]</span>
<span class="n">MAINTAINER</span> <span class="n">authors_name</span>
</pre></div>


<h6 id="run-runcommit">RUN 接受命令作为参数并用于创建镜像,RUN命令用于创建镜像（在之前commit的层之上形成新的层）</h6>
<div class="hlcode"><pre><span class="cp"># Usage: RUN [command]</span>
<span class="n">RUN</span> <span class="n">aptitude</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">riak</span>
</pre></div>


<h6 id="add">ADD  两个参数 源 和 目标，基本作用是从源系统的文件系统上复制文件到目标容器的文件系统</h6>
<div class="hlcode"><pre><span class="cp"># Usage: ADD [source directory or URL] [destination directory]</span>
<span class="n">ADD</span> <span class="o">/</span><span class="n">my_app_folder</span> <span class="o">/</span><span class="n">my_app_folder</span>
</pre></div>


<h6 id="cmd">CMD 用于执行特定的命令，这些命令不是在镜像构建的过程中执行，而是在用镜像构建容器后被调用</h6>
<div class="hlcode"><pre><span class="cp"># Usage 1: CMD application &quot;argument&quot;, &quot;argument&quot;, ..</span>
<span class="n">CMD</span> <span class="s">&quot;echo&quot;</span> <span class="s">&quot;Hello docker!&quot;</span>
</pre></div>


<h6 id="env-keyvalue">ENV  设置环境变量。这些变量以”key=value”的形式存在，并可以在容器内被脚本或者程序调用</h6>
<div class="hlcode"><pre><span class="cp"># Usage: ENV key value</span>
<span class="n">ENV</span> <span class="n">SERVER_WORKS</span> <span class="mi">4</span>
</pre></div>


<h6 id="expose">EXPOSE 指定端口，使容器内的应用可以通过端口和外界交互</h6>
<div class="hlcode"><pre><span class="cp"># Usage: EXPOSE [port]</span>
<span class="n">EXPOSE</span> <span class="mi">8080</span>
</pre></div>


<h6 id="user-uid">USER 设置运行容器的UID</h6>
<div class="hlcode"><pre><span class="cp"># Usage: USER [UID]</span>
<span class="n">USER</span> <span class="mi">751</span>
</pre></div>


<h6 id="volume">VOLUME 让你的容器访问宿主机上的目录</h6>
<div class="hlcode"><pre><span class="cp"># Usage: VOLUME [&quot;/dir_1&quot;, &quot;/dir_2&quot; ..]</span>
<span class="n">VOLUME</span> <span class="p">[</span><span class="s">&quot;/my_files&quot;</span><span class="p">]</span>
</pre></div>


<h6 id="workdir-cmd">WORKDIR 设置CMD指明的命令的运行目录</h6>
<div class="hlcode"><pre><span class="cp"># Usage: WORKDIR /path</span>
<span class="n">WORKDIR</span> <span class="o">~/</span>
</pre></div>


<h6 id="entrypoint">ENTRYPOINT</h6>
<p><a href="http://www.alauda.cn/2015/07/17/dockerfileinstructions/">参考文档</a></p>
</div>

        </div>
        <div id="footer">
            <span>
                Copyright © 2016 feng003.
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
            </span>
        </div>
        
    </body>
</html>